{% extends 'lecture/base.html' %}
{% load static %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/forum.css' %}">
    <script src="https://unpkg.com/htmx.org@2.0.4"
            integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" 
            crossorigin="anonymous"></script>
{% endblock %}

{% block lecture_content %}
<div class="max-w-4xl mx-auto px-4 py-8">
  
  <!-- Breadcrumb -->
  <div class="text-sm breadcrumbs">
    <ul>
      <li><a href="#" class="text-blue-500">Home</a></li> 
      <li>Module 1</li>
    </ul>
  </div>

  <!-- Header & Subscribe -->
  <div class="flex items-center justify-between mt-4">
    <div>
      <h1 class="text-3xl font-bold">Module 1</h1>
      <p class="text-gray-600">Discuss this week's modules here.</p>
    </div>
    <a class="text-blue-600 font-medium hover:underline" href="#">Subscribe</a>
  </div>

  <!-- Search and Post -->
  <div class="mt-6 flex items-center gap-2">
    <input type="text" placeholder="Search" class="input input-bordered w-full sm:max-w-xs" />
    <button class="btn btn-primary">Search</button>
    <!-- Button to trigger the dialog for creating a new post -->
    <button class="btn btn-outline btn-primary" onclick="document.getElementById('newTopicModal').showModal()">Create post</button>
  </div>

  <!-- Filters -->
  <div class="mt-6 flex flex-wrap items-center justify-between">
    <div class="flex items-center space-x-2">
      <span class="font-semibold">Forum:</span>
      <div class="dropdown">
        <label tabindex="0" class="btn btn-sm btn-outline">Module 1</label>
        <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
          <li><a>Module 1</a></li>
          <li><a>Module 2</a></li>
        </ul>
      </div>
    </div>

    <div class="flex items-center space-x-4 mt-4 sm:mt-0">
      <div class="dropdown dropdown-hover">
        <label tabindex="0" class="cursor-pointer">Sort: <span class="font-medium">Recent</span></label>
        <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40">
          <li><a>Recent</a></li>
          <li><a>Most Liked</a></li>
        </ul>
      </div>

      <div class="dropdown dropdown-hover">
        <label tabindex="0" class="cursor-pointer">Filter: <span class="font-medium">All</span></label>
        <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-40">
          <li><a>All</a></li>
          <li><a>Unread</a></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Forum Thread Card -->
  <div class="mt-8 border-t border-gray-200 pt-6 space-y-8">

    <div class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300">
        <a href="#" class="text-blue-600 font-bold text-lg hover:underline">I want to make a new friend</a>
        <p class="mt-2 text-gray-700 text-base">
          Hello everyone, My name is Riza Adan, I'm from the Philippines. Nice meeting you all. I want to make a new friend here.
        </p>
      
        <div class="flex items-center justify-between mt-4 text-sm text-gray-500">
          <div class="flex space-x-4">
            <button class="flex items-center gap-1 text-gray-600 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded-md transition-all">
              <i class="fa-regular fa-thumbs-up"></i> Like
            </button>
            <a href="{% url 'forum_thread_details' course.slug %}"><button class="flex cursor-pointer  gap-1 text-gray-600 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded-md transition-all">
              <i class="fa-regular fa-comment-dots"></i> Reply 3
            </button></a>
          </div>
          <div class="flex items-center space-x-2">
            <div class="avatar placeholder">
              <div class="bg-gray-200 text-gray-600 rounded-full w-8 h-8 flex items-center justify-center">
                FS
              </div>
            </div>
            <span class="text-sm text-gray-500">Farhana Islam Saima Â· replied 5 hours ago</span>
          </div>
        </div>
      </div>
  </div>

  <!-- Dialog for New Topic Form - Fixed for DaisyUI -->
  <dialog id="newTopicModal" class="modal">
    <div class="modal-box">
      <h2 class="text-xl font-bold mb-4">Create New Topic</h2>
      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        
        <!-- Input fields for the topic creation form -->
        <div class="mb-4">
          <label for="title" class="block text-sm font-semibold text-gray-700">Title</label>
          <input type="text" id="title" name="title" class="input input-bordered w-full" placeholder="Enter the title of your topic" required>
        </div>

        <div class="mb-4">
          <label for="content" class="block text-sm font-semibold text-gray-700">Content</label>
          <textarea id="content" name="content" class="textarea textarea-bordered w-full" rows="4" placeholder="Enter the content of your topic" required></textarea>
        </div>

        <div class="form-control mt-4">
          <button type="submit" class="btn btn-primary w-full">
            Post
          </button>
        </div>
      </form>
      <div class="modal-action">
        <form method="dialog">
          <button class="btn">Close</button>
        </form>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>
</div>

<!-- Optional: FontAwesome for icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
{% endblock lecture_content %}