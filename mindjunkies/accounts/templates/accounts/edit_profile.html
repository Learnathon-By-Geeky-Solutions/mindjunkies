{% extends "base.html" %}
{% load crispy_forms_filters %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block head_title %}
    {% trans "Edit Profile" %}
{% endblock %}

{% block main_content %}
    <!-- Main container for the page -->
    <div class="min-h-screen bg-base-200 py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-3xl mx-auto">
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <!-- Page title -->
                    <h1 class="card-title text-2xl font-bold text-center mb-6">
                        {% trans "Edit Profile" %}
                    </h1>

                    <!-- Form for editing profile -->
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <!-- Tabs for different sections of the form -->
                        <div class="tabs tabs-border">
                            <!-- Tab 1 -->
                            <input type="radio" name="my_tabs_2" class="tab" aria-label="User Information" />
                            <div class="tab-content border-base-300 bg-base-100 p-10">
                                {{ user_form |crispy }}
                            </div>

                            <!-- Tab 2 (default active) -->
                            <input type="radio" name="my_tabs_2" class="tab" aria-label="Profile Information" checked="checked" />
                            <div class="tab-content border-base-300 bg-base-100 p-10">
                                {{ profile_form |crispy }}
                            </div>
                        </div>

                        <!-- Submit button -->
                        <button type="submit" class="btn btn-primary mt-6">
                            Save Changes
                        </button>
                    </form>

                    <!-- Divider and cancel button -->
                    <div class="divider">
                        {% trans "or" %}
                    </div>
                    <div class="text-center">
                        <a href="{% url 'profile' %}" class="btn btn-outline">
                            {% trans "Cancel" %}
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for switching tabs -->
    <script>
        function switchTab(e, targetId) {
            e.preventDefault();
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // Show the selected tab content
            document.getElementById(targetId).classList.remove('hidden');

            // Remove active class from all tabs
            document.querySelectorAll('[role="tab"]').forEach(tab => tab.classList.remove('tab-active'));
            // Add active class to the clicked tab
            e.target.classList.add('tab-active');
        }
    </script>
{% endblock %}
