{% extends 'base.html' %}

{% block main_content %}
  <h2>MCQ Exam</h2>
  
  <!-- Form to submit answers and input text for question generation -->
  <form method="POST">
    {% csrf_token %}

    <!-- Textarea for user input text -->
    <div class="form-group">
      <label for="text">Enter Text for MCQ Generation:</label>
      <form method="POST" >
      <textarea id="text" name="text" class="form-control" rows="4" cols="50" required>{{ request.POST.text }}</textarea>
      <button type="submit" class="primary" style="background-color: #4CAF50; color: white; border: none; padding: 10px 20px; text-align: center; text-decoration: none; display: inline-block; font-size: 16px; cursor: pointer; border-radius: 5px; transition: background-color 0.3s;">
        Submit Questions
      </button>
      
     

    </form>
    </div>

    <br>

    {% if mcqs %}
      <h3>Generated Questions</h3>

      <!-- Loop through generated MCQs -->
      {% for mcq in mcqs %}
        <fieldset>
          <legend>{{ mcq.question }}</legend>

          <!-- Loop through the options and display them as radio buttons -->
          {% for option, answer in mcq.options.items %}
            <label>
              <input type="radio" name="answer_{{ forloop.parentloop.counter }}" value="{{ option }}">
              {{ option }}) {{ answer }}
            </label><br>
          {% endfor %}

          <!-- Correct answer for debugging (you can remove this in production) -->
          <p><strong>Correct Answer:</strong> {{ mcq.correct_answer }}</p>
        </fieldset>
        <br>
      {% endfor %}
      
      <button type="submit">Submit Answers</button>
    {% else %}
      <p>No MCQs generated. Please provide input text above to generate questions.</p>
    {% endif %}
    
  </form>
{% endblock %}
